EP1 - MAC0352
Autor: Ygor Tavela Alves nUSP: 10687642


ARQUIVOS
Na raiz deste projeto encontram-se um Makefile para compilar o programa, um bash script para executar testes de perfomance de cpu/memória, um arquivo slides.pdf contendo uma breve apresentação do EP1, um diretório tests/ contendo as imagens dos testes realizados e, por fim, o diretório src/ que contém o código fonte do projeto.
O diretório src/ se organiza da seguinte maneira:
- header e implementação do servidor de MQTT (server.h e server.c)
- header e implementação de funções utilitárias (utils.h e utils.c)
- header e implementação de funções relacionadas ao desempacotamento de pacotes de rede (deserialize_packet.h e deserialize_packet.c)
- header e implementação de funções relacionadas ao empacotamento de pacotes de rede (serialize_packet.h e serialize_packet.c)
- header de algumas constantes relacionadas ao protocolo MQTT (mqtt.h)
- header de macros que implementam estruturas de dados usadas para implementar o EP, no caso, Hash Table (uthash.h) e uma Double Linked List (utlist.h)
  - créditos: https://github.com/troydhanson/uthash


COMPILANDO O PROGRAMA
O programa pode ser compilado através do programa make, utilizando o Makefile presente na pasta raiz do EP. Há duas opções para executar o make:
make : compilação padrão do programa gerando executável server no diretório;
make clean : apaga programa


EXECUTANDO O PROGRAMA
O programa pode ser executado após compilação utilazando o make. Para isto, basta executar o comando ./server #porta_de_rede
Sendo #porta_de_rede a porta em que o servidor irá ficar escutando as requisições.


SOBRE O BASH SCRIPT DE TESTE
O bash script tem por função testar apenas a CPU e Memória utilizada pelo servidor MQTT para uma dada quantidade de clientes. Para realizar análise de consumo de rede foi utilizado a própria interface do Wireshark.
Para executar o bash script, basta executar:
./run_tests.sh #IP_HOST #PORTA_HOST #QUANTIDADE_CLIENTES
Sendo #IP_HOST o ip da máquina que está executando o servidor, #PORTA_HOST a porta que o servidor está escutando e #QUANTIDADE_CLIENTES a quantidade de clientes simultaneos que irão realizar funções de pub/sub (neste caso cada cliente significa 1 publisher e 1 subscriber)


DEPENDÊNCIAS
bash script p/ execução de testes:
- psrecord: Geração de gráfico de perfomance cpu/memória, para instalar: pip3 install psrecord
